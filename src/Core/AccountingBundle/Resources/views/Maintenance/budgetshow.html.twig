{# src/Core/AccountingBundle/Resources/views/Maintenance/chartmastershow.html.twig #}
{% extends 'CoreAccountingBundle:Default:accounting.html.twig' %}

{% block title %}Accounting - Budget{% endblock %}

{% block navigation %}
    {{ parent() }}
{% endblock %}

{% block headtitle %}
Display Budget
{% endblock %}

{% block body %}

{% for flashMessage in app.session.flashbag.get('returnMessage') %}
<div class="row">
	<div class="alert alert-info" role="alert">
        {{ flashMessage }}
    </div>
</div>
{% endfor %}
<div class="row">
	<div class="col-lg-6">
		<div class="panel panel-default">
            <div class="panel-heading">
            	Show budget selections
            </div>
            <div class="panel-body">
            	<div class="btn-group" data-toggle="buttons">
            		<label class="btn btn-primary">
            			<input type="radio" name="options" id="allrows" autocomplete="off"> All Accounts
  					</label>
  					<label class="btn btn-primary">
  						<input type="radio" name="options" id="limitrows" autocomplete="off"> Current Budget Accounts
  					</label>
  				</div>
            </div>
        </div>
	</div>
	<div class="col-lg-12">
		<div class="panel panel-default">
            <div class="panel-body">
            	<div class="dataTable_wrapper">
					<table class="table table-striped table-bordered table-hover" id="dataTables-example">
						<thead><tr>
							<th>Account Nr.</th>
							<th>Account Name</th>
							<th>Edit Budgets</th>
						</tr></thead>
						<tbody>
						{% for budget in budgets %}
						{% if budget.getChartdetails.getBudget == 0 %}
					    <tr class="budget0">
					    	<td>{{ budget.accountcode }}</td>
					    	<td>{{ budget.accountname }}</td>
					    	<td><a href="{{ path('CoreAccountingBundle_maintenance_budget_edit',{'account_id':budget.accountcode}) }}">
					    		<i class="fa fa-pencil-square-o"></i>
					    	</a></td>
						</tr>
						{% elseif budget.getChartdetails.getBudget != 0 %}
					    <tr class="budgetnot0">
					    	<td>{{ budget.accountcode }}</td>
					    	<td>{{ budget.accountname }}</td>
					    	<td><a href="{{ path('CoreAccountingBundle_maintenance_budget_edit',{'account_id':budget.accountcode}) }}">
					    		<i class="fa fa-pencil-square-o"></i>
					    	</a></td>
						</tr>
						{% endif %}
					    {% else %}
					        <p>There are no accounts within the budget</p>
					    {% endfor %}
					    </tbody>
					</table>
				</div>
				<!-- /.table-responsive -->
			</div>
            <!-- /.panel-body -->
            
		</div>
        <!-- /.panel -->
	</div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

{% endblock %}


{% block javascripts %}
    {{ parent() }}
    <script>
    	var rows = $('table.table tr');

		$('#allrows').click(function() {
		    rows.show();
		});
		
		$('#limitrows').click(function() {
		    var budgetnot0 = rows.filter('.budgetnot0').show();
		    rows.not( budgetnot0 ).hide();
		});
		
		
    </script>
{% endblock %}